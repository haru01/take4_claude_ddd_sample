# ストーリー受け入れ条件を入れてTODOを作成

---
name: create_todo

args:

- name: index
  - short: i
  - description: TODOのインデックス番号（例: create_training）
  - required: true
- name: content
  - short: c
  - description: ユーザーストーリーなどタスク作成のためのインプット情報
  - required: true

---

## 使用例

```
/create_todo index=create_training content="研修の登録機能を実装する"
/create_todo i=create_training c="研修の登録機能を実装する...."
```

## 実行内容

{{content}} を満たすため、タスクを深く考えて分解して,TODO-{{index}}.mdファイルを作成してください。
わからない点があれば、必ず質問を記入してください。

ステップバイステップで実装して欲しいので、
タスク分解の際は、下記で段階的に実装できるようにしてください。

## タスク実施の事前条件

* 受け入れ条件の疑問点の回答を、ナビゲーターから得ること
* {{index}} のブランチ名でブランチを作成または チェックアウトする
* スタート時のテストは全てパスしてグリーン状態から開始すること

## ドメインの型定義

* 機能追加しやすいようにリファクタリングした方が良い場合は、リファクタリングを行う
* domainの types.ts を実装する
* リファクタリングした方が良い場合は、リファクタリングを行う

## ドメインの関数の実装

* 受け入れ条件の曖昧な点はナビゲーターに質問する
* domainの function.create.test.ts でテストを作成する。テストは１つだけ実行できるようにほかは skip にする
* domainの function.create.ts を実装する
* テストを実行してパスすることを確認する、修正する
* skip していた テストを1つだけ実行できるようにして、function.create.ts types.ts を修正する。
* skipがなくなるまで繰り返す
* ３回 Red になって、進展がなければ、一旦停止して、ナビゲーターの指示を受ける
* 設計改善したほうがよいリファクタリングした方が良い場合は、リファクタリングを行う
* 受け入れ条件をもとに、テストに抜け漏れがなければ次に進む

## アプリケーション層の実装

* application の service.create.test.ts　を作成する。テストは１つだけ実行できるようにほかは skip にする
* application の service.create.ts を実装する
* テストを実行してパスすることを確認する、修正する
* skip していた テストを1つだけ実行できるようにして、function.create.ts types.ts を修正する。
* skipがなくなるまで繰り返す
* 受け入れ条件をもとに、テストに抜け漏れがなければ次に進む
* 3回 テストに失敗したら 一旦停止して、ナビゲーターの指示を受ける

## リファクタリングの条件

* 大規模リファクタリングは絶対にしないこと
* ストーリー実現を容易にするためのリファクタリングは行うこと
* 意味的な重複があれば取り除くリファクタリングはおこなうこと
* リファクタリングは、テストが通ることを確認しながら行うこと
